namespace = iberia_north_africa

#decision_unite_africa
#0010	- I united Africa
#0011	- Someone united Frica

#decision_build_grand_church
#1001	- I built a church!
#1002	- Someone built a church

#Portugal formatino events
#### Changed from Vanilla: Removed iberia_north_africa.0001
#### Changed from Vanilla: Removed iberia_north_africa_0002_is_in_portugal_trigger
#### Changed from Vanilla: Removed iberia_north_africa.0002

#Spain unification events
#### Changed from Vanilla: Removed iberia_north_africa.0005
#### Changed from Vanilla: Removed iberia_north_africa.0006

#I have united Africa!
iberia_north_africa.0010 = { #by Mathilda Bjarnehed
	type = character_event
	title = iberia_north_africa.0010.t
	desc = {
		desc = iberia_north_africa.0010.start.desc
		triggered_desc = {
			trigger = {
				exists = scope:vassal_1
				exists = scope:vassal_2
			}
			desc = iberia_north_africa.0010.vassals.desc
		}
		first_valid = {
			triggered_desc = {
				trigger = { faith = { religion_tag = west_african_bori_religion } }
				desc = iberia_north_africa.0010.spirits.desc
			}
			triggered_desc = {
				trigger = {
					faith = {
						OR = {
							religion_tag = west_african_roog_religion
							religion_tag = west_african_religion
						}
					}
				}
				desc = iberia_north_africa.0010.ancestors.desc
			}
			desc = iberia_north_africa.0010.generic.desc
		}
	}
	theme = realm
	left_portrait = {
		character = scope:africa_uniter
		animation = personality_honorable
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
		unite_africa_decision_effects = yes

		#For description
		random_vassal = {
			limit = { highest_held_title_tier = tier_kingdom }
			alternative_limit = { highest_held_title_tier = tier_duchy }
			alternative_limit = { highest_held_title_tier = tier_county }
			save_scope_as = vassal_1
		}
		random_vassal_or_below = {
			limit = {
				NOR = {
					has_culture = scope:vassal_1.culture
					highest_held_title_tier = scope:vassal_1.highest_held_title_tier
				}
				highest_held_title_tier = tier_county
			}
			alternative_limit = {
				NOR = {
					has_culture = scope:vassal_1.culture
					highest_held_title_tier = scope:vassal_1.highest_held_title_tier
				}
				highest_held_title_tier = tier_duchy
			}
			alternative_limit = {
				NOR = {
					has_culture = scope:vassal_1.culture
					highest_held_title_tier = scope:vassal_1.highest_held_title_tier
				}
			}
			save_scope_as = vassal_2
		}
	}
	
	option = {
		name = iberia_north_africa.0010.a

		give_nickname = nick_the_unifier_of_africa
	}
}

#Someone united Africa!
iberia_north_africa.0011 = { #by Mathilda Bjarnehed
	type = character_event
	title = iberia_north_africa.0010.t
	desc = {
		desc = iberia_north_africa.0011.start.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_RelationToMe_relation = { CHARACTER = scope:africa_uniter }
				}
				desc = iberia_north_africa.0011.relation_former.desc
			}
			desc = iberia_north_africa.0011.former.desc
		}	
		desc = iberia_north_africa.0011.end.desc		
	}
	theme = realm
	left_portrait = {
		character = scope:africa_uniter
		animation = personality_honorable
	}

	immediate = {
		show_as_tooltip = {
			scope:africa_uniter = {
				faith = { change_fervor = medium_fervor_gain }
			}
		}
	}
	
	option = {
		name = {
			trigger = { faith = scope:africa_uniter.faith }
			text = iberia_north_africa.0002.a1
		}
		name = {
			trigger = { NOT = { faith = scope:africa_uniter.faith } }
			text = name_alas
		}
	}
}

#Battle of Tours **Revenge** Events
#### Changed from Vanilla: Removed iberia_north_africa.0015
#### Changed from Vanilla: Removed iberia_north_africa.0016
