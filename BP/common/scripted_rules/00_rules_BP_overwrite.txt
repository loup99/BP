# Determines if a faith can be created, on top of the piety requirement, and the doctrine requirements
# Also handles reforming a faith, check for the unreformed doctrine to enable those additional checks
# Root is the faith creator
faith_creation = {
	trigger_if = {
		limit = {
			highest_held_title_tier = tier_county
			is_independent_ruler = no
		}
		custom_description = {
			text = "faith_creation_duchy_or_higher"
			highest_held_title_tier >= tier_duchy
		}
	}

	is_adult = yes
	is_at_war = no
	##### Changed from Vanilla vvvvv
	culture = { has_innovation = innovation_state_religion }
	##### Changed from Vanilla ^^^^^
	custom_description = {
		text = "character_is_not_real_head"
		NOT = { faith.religious_head = root }
	}

	custom_description = {
		text = "character_can_only_create_one_faith"
		NOT = { exists = var:has_created_a_faith }
	}

	trigger_if = {
		limit = { faith = { has_doctrine_parameter = unreformed } }
		
		NOT = {
			custom_description = {
				text = faith_has_been_reformed
				object = faith
				exists = faith.var:has_been_reformed
			}
		}

		faith = {
			num_realm_holy_sites_faithful_holders = {
				CHARACTER = root
				COUNT = 3
			}
		}
	}
}

##### Changed from Vanilla vvvvv

# scope:new_faith is the faith they want to convert to
faith_conversion = {
	is_adult = yes
	NOT = { faith.religious_head = root }
	is_in_ongoing_great_holy_war = no
	
	##### Changed from Vanilla vvvvv
	#Faiths locked from creation/conversion
	#Make sure to tie to events/religion_events/heresy_events.txt: # Locked faiths
	
	#Islam
	custom_description = {
		text = islam_has_not_risen
		NOR = {
			scope:new_faith.religion = religion:islam_religion
			scope:new_faith.religion = religion:yazidi_religion
			scope:new_faith = faith:gayomarthianism
			scope:new_faith = faith:khurramism
		}
	}
	#Christianity
	custom_description = {
		text = schism_of_the_three_chapters_inactive
		NOT = { scope:new_faith = faith:aquileianism }
	}
	custom_description = {
		text = iconoclast_controversy_has_not_occured
		NOT = { scope:new_faith = faith:iconoclast }
	}
	custom_description = {
		text = syriac_orthodoxy_has_not_formed
		NOT = { scope:new_faith = faith:syrian_orthodox }
	}
	custom_description = {
		text = western_schism_has_not_yet_occured
		NOR = {
			scope:new_faith = faith:catholic
			scope:new_faith = faith:orthodox
		}
	}
	custom_description = {
		text = paulicianism_has_not_risen
		NOT = { scope:new_faith = faith:paulician }
	}
	#Judaism
	custom_description = {
		text = kabarism_not_yet_available
		NOT = { scope:new_faith = faith:kabarism }
	}
	#Mazdan
	custom_description = {
		text = mazdakism_has_not_yet_risen
		NOT = { scope:new_faith = faith:mazdakism }
	}
	#Eastern
	custom_description = {
		text = burmese_invasion_has_not_happened
		NOT = { scope:new_faith = faith:ari }
	}
	custom_description = {
		text = buddhism_has_not_reached_tibet
		NOR = {
			scope:new_faith = faith:lamaism
			scope:new_faith = faith:bon
		}
	}
	#Paganism
	custom_description = {
		text = norse_pagan_not_split
		NOT = { scope:new_faith = faith:norse_pagan }
	}
	##### Changed from Vanilla ^^^^^
}
##### Changed from Vanilla ^^^^^
