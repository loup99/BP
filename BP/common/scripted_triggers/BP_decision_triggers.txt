#Checks that given target controls a sufficient number of all the counties meeting some criteria
#H/T @Tobbzn from CK3 Modding discord (based on his proposal)
#https://discord.com/channels/735413460439007241/824697749991325747/981692834098843679
##### TODO (Beta): For better localization, probably want to compare scripted_lists though
check_if_control_percentage_of_all_counties_with_condition_trigger = {
	any_realm_county = {
		count >= { every_county = { limit = { $FEATURE$ = $CHARACTER$.$FEATURE$ } add = $PERCENTAGE$ } }
		$FEATURE$ = $CHARACTER$.$FEATURE$
		holder = {
			OR = {
				this = $CHARACTER$
				any_liege_or_above = { this = $CHARACTER$ }
			}
		}
	}
}

#Checks that given target controls a sufficient number of all the counties meeting some criteria
#H/T @Tobbzn from CK3 Modding discord (based on his proposal)
#https://discord.com/channels/735413460439007241/824697749991325747/981692834098843679
##### TODO (Beta): For better localization, probably want to compare scripted_lists though
check_if_control_percentage_of_all_counties_with_parent_culture_and_heritage_trigger = {
	any_realm_county = {
		count >= {
			every_county = {
				limit = {
					OR = {
						culture = $REQUESTED_CULTURE$
						AND = {
							culture = { any_parent_culture_or_above = { this = $REQUESTED_CULTURE$ } }
							culture = { has_same_culture_heritage = $REQUESTED_CULTURE$ }
						}
					}
				}
				add = $PERCENTAGE$
			}
		}
		OR = {
			culture = $REQUESTED_CULTURE$
			AND = {
				culture = { any_parent_culture_or_above = { this = $REQUESTED_CULTURE$ } }
				culture = { has_same_culture_heritage = $REQUESTED_CULTURE$ }
			}
		}
		holder = {
			OR = {
				this = $CHARACTER$
				any_liege_or_above = { this = $CHARACTER$ }
			}
		}
	}
}