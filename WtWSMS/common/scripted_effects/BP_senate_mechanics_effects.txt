disestablished_senate_effect = {
	add_prestige = 1000
	
	#The Consul _Really_ Hates You
	every_living_character = {
		limit = { has_character_modifier = roman_consul_$REGION$ }
		remove_trait = senator_$REGION$
		remove_character_modifier = roman_consul_$REGION$
		add_opinion = {
			target = root
			modifier = hate_opinion
			opinion = -200
		}
	}
	#The Senators Hates You
	custom_tooltip = {
		text = senators_hate_you
		every_living_character = {
			limit = { has_trait = senator_$REGION$ }
			remove_trait = senator_$REGION$
			add_opinion = {
				target = root
				modifier = hate_opinion
				opinion = -100
			}
		}
	}
	#If he's alive, the Emperor hates you
	title:e_roman_empire.holder ?= {
		add_opinion = {
			target = root
			modifier = hate_opinion
			opinion = -100
		}
	}
	#The Regional Empires, if they exist, hate you
	title:$MAIN_EMPIRE$.holder ?= {
		add_opinion = {
			target = root
			modifier = hate_opinion
			opinion = -200
		}
	}
	title:$OPPOSITE_EMPIRE$.holder ?= {
		add_opinion = {
			target = root
			modifier = hate_opinion
			opinion = -100
		}
	}
	#Non-Senatorial Families are annoyed at their loss of prestige
	#custom_tooltip = {
		#text = senatorial_families_hate_you
		every_living_character = {
			limit = {
				exists = dynasty
				this.dynasty = { has_dynasty_modifier = roman_senate_family_$REGION$ }
				this = this.dynasty.dynast
			}
			this.dynasty = { remove_dynasty_modifier = roman_senate_family_$REGION$ }
		}
	#}
	
	remove_global_variable = $REGION$_senate_is_established
}

senate_election_effect = {
	every_living_character = { #Remove the old Consul
		limit = { has_character_modifier = roman_consul_$REGION$ }
		remove_character_modifier = roman_consul_$REGION$
		if = {
			limit = { NOT = { has_trait = former_consul_$REGION$ } }
			add_trait = former_consul_$REGION$
		}
		save_scope_as = old_consul_$REGION$
	}
	if = { #Elevate the nominee if he exists
		limit = { any_living_character = { has_character_modifier = roman_consul_nominee_$REGION$ } }
		every_living_character = {
			limit = { has_character_modifier = roman_consul_nominee_$REGION$ }
			remove_character_modifier = roman_consul_nominee_$REGION$
			add_character_modifier = roman_consul_$REGION$
			if = {
				limit = { NOT = { has_trait = senator_$REGION$ } }
				add_trait = senator_$REGION$
			}
			save_scope_as = new_consul_$REGION$
		}
	}
	else = { #Otherwise, pick a random senator who is _not_ the city holder
		random_living_character = {
			limit = {
				NOT = { this = title:$BARONY$.holder.top_liege }
				NOT = { has_character_modifier = roman_consul_$REGION$ }
				NOT = { this = scope:old_consul_$REGION$ }
				has_trait = senator_$REGION$
				senator_in_$LOCATION$_trigger = yes
			}
			add_character_modifier = roman_consul_$REGION$
			save_scope_as = new_consul_$REGION$
		}
	}
	
	every_ruler = {
		limit = {
			is_ai = no
			in_diplomatic_range = title:$BARONY$.holder
		}
		send_interface_toast = {
			type = event_generic_neutral
			title = senate_$REGION$_elected_new_consul_title
			custom_tooltip = senate_$REGION$_elected_new_consul_tt
			right_icon = title:d_senate
		}
	}
	
	#If the city holder is stalling the Senate, remind him again...
	if = {
		limit = { title:$BARONY$.holder.top_liege = { has_character_modifier = stalled_the_senate } }
		every_living_character = { limit = { has_character_modifier = roman_consul_$REGION$ } save_scope_as = the_consul_$REGION$ }
		if = {
			limit = { title:$BARONY$ = title:b_roma }
			title:$BARONY$.holder.top_liege = { trigger_event = { id = BP_roman_government_events.0020 days = { 3 7 } } }
		}
		else = {
			title:$BARONY$.holder.top_liege = { trigger_event = { id = BP_roman_government_events.1020 days = { 3 7 } } }
		}
	}
}

made_a_senator_effect = { #recipient scope
	add_trait = senator_$REGION$
	add_opinion = {
		modifier = respect_opinion
		target = $ACTOR$
		opinion = nominated_senator_opinion_gain
	}
}

elevated_a_dynasty_effect = {
	$RECIPIENT$ = {
		dynasty = { add_dynasty_modifier = roman_senate_family_$REGION$ }
		if = {
			limit = { NOT = { has_trait = senator_$REGION$ } }
			add_trait = senator_$REGION$
		}
		if = {
			limit = { NOT = { $ACTOR$ = $RECIPIENT$ } }
			add_opinion = {
				modifier = respect_opinion
				target = scope:actor
				opinion = nominated_dynasty_opinion_gain
			}
		}
	}
	every_living_character = {
		limit = {
			this.dynasty = $RECIPIENT$.dynasty
			NOT = { this = $RECIPIENT$ }
			valid_to_be_senator = {
				ACTOR = $ACTOR$
				RECIPIENT = this
				THE_CITY = $THE_CITY$
			}
		}
		if = {
			limit = { NOT = { has_trait = senator_$REGION$ } }
			add_trait = senator_$REGION$
		}
		
		add_opinion = {
			modifier = respect_opinion
			target = $ACTOR$
			opinion = nominated_dynasty_opinion_gain
		}
	}
}

nominated_consul_effect = { #recipient scope
	add_character_modifier = roman_consul_nominee_$REGION$
	if = {
		limit = { NOT = { has_trait = senator_$REGION$ } }
		add_trait = senator_$REGION$
	}
	if = {
		limit = { NOT = { this = $ACTOR$ } }
		add_opinion = {
			modifier = respect_opinion
			target = $ACTOR$
			opinion = nominated_senator_opinion_gain
		}
	}
}

fire_senate_interface_toast_to_human_senators_effect = {
	every_ruler = {
		limit = {
			is_ai = no
			has_trait = senator_$REGION$
		}
		send_interface_toast = {
			type = event_generic_neutral
			title = senate_$REGION$_$EVENT_TYPE$_title
			custom_tooltip = senate_$REGION$_$EVENT_TYPE$_tt
			right_icon = title:d_senate
		}
	}
}
