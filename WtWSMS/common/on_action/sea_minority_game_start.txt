#Sources:
#[1] M. Mueller, HYPSISTOS CULTS IN THE GREEK WORLD DURING THE ROMAN IMPERIUM. Hamilton, Ontario: McMaster University, 2014.

on_game_start = {
	on_actions = {
		set_minorities_game_start
		BP_set_minorities_universal
		BP_set_minorities_by_date
	}
}

on_game_start_after_lobby = {
	on_actions = {
		initial_spawn_minority_courtiers
	}
}

##### Changed from Vanilla: Removed various religions based on WtWSMS status, added WtWSMS cases

# culture_minorities_large
# culture_minorities_small
# faith_minorities_large
# faith_minorities_small

set_minorities_game_start = {
	effect = {
		##### Changed from Vanilla: Removed Urartuism in Africa (‽)
		##### Changed from Vanilla: Removed Yazidis
		##### Changed from Vanilla: Removed Ash'ari
		
		### Konchinim Malabarism
		every_county = {
			limit = {
				OR = {
					this = title:c_kerala
					this = title:c_venadu
					this = title:c_alupa
				}
			}
			add_small_culture_and_faith_to_county_effect = {
				FAITH = faith:malabarism
				CULTURE = culture:kochinim
			}
		}
		#Indian Nestorians
		every_county = {
			limit = {
				OR = {
					this = title:c_kanara
					this = title:c_panaji
				}
			}
			add_small_faith_to_county_effect = { FAITH = faith:nestorian }
		}
		# Manicheans in Hexi Corridor
		every_county = {
			limit = {
				OR = {
					this = title:c_shazhou
					this = title:c_liangzhou
				}
			}
			add_small_faith_to_county_effect = { FAITH = faith:manichean }
		}
		# Rabiinism in Hexi Corridor
		every_county = {
			limit = {
				OR = {
					this = title:c_shazhou
					this = title:c_liangzhou
				}
			}
			add_small_faith_to_county_effect = { FAITH = faith:rabbinism }
		}
		# Parsees
		title:c_daman = {
			add_small_culture_and_faith_to_county_effect = {
				FAITH = faith:mazdayasna
				CULTURE = culture:persian
			}
		}
	}
}

BP_set_minorities_universal = {
	effect = {
		# Religions
		#========================
		#Abrahamics
		## Christians
		### Nestorians
		every_county = { #Large Concentrations
			limit = {
				OR = {
					this.duchy = title:d_soghd
					this = title:c_tib
					this = title:c_merv
				}
				NOT = { this = title:c_kishsh }
				NOT = { this = title:c_otrar }
			}
			add_large_faith_to_county_effect = { FAITH = faith:nestorian }
		}
		every_county = { #Small Concentrations
			limit = {
				OR = {
					this.duchy = title:d_osrushana
					this.duchy = title:d_ferghana
					this.duchy = title:d_chah
					this = title:c_zamm
					this = title:c_amol
					this = title:c_kishsh
				}
			}
			add_small_faith_to_county_effect = { FAITH = faith:nestorian }
		}
		### Marcionism
		every_county = { #Large Concentrations
			limit = {
				OR = {
					this = title:c_ardabil
					this = title:c_zanjan
					this = title:c_gilan
					this = title:c_maragha
				}
			}
			add_large_faith_to_county_effect = { FAITH = faith:marcionism }
		}
		every_county = { #Small Concentrations
			limit = { this = title:c_talish }
			add_small_faith_to_county_effect = { FAITH = faith:marcionism }
		}
		
		## Jews
		### Juhuro Tzadikites (Mountain Jews)
		every_county = {
			limit = {
				OR = {
					this = title:c_durdzukia
					this = title:c_derbent
				}
			}
			add_small_culture_and_faith_to_county_effect = {
				FAITH = faith:tzadikite
				CULTURE = culture:juhuro
			}
		}
		### Diasporic Localized Rabbinism Populations
		every_county = {
			limit = {
				OR = {
					#Georgian Jews
					this = title:c_kakheti
					this = title:c_tbilisi
					this = title:c_kartli
					#Other Jews
					this = title:c_byzantion
					this = title:c_aeolis
					this = title:c_ionia
					this = title:c_alexandria
					this = title:c_roma
					this = title:c_tunis #Carthage
					this = title:c_antiocheia
					this = title:c_attica
					this = title:c_baghdad
					this = title:c_guzgan #Yahudan seems to be a reference to Jews
					this = title:c_pacatiana #Jewish presence since Selecudi time, likely contributed to Hypsisterians
					this.duchy = title:d_cyprus #Long term Jewish presence in Cyprus, although significantly reduced after the AD 116 revolt and poorly attested AD II-IV century [1]
				}
			}
			add_small_faith_to_county_effect = { FAITH = faith:rabbinism }
		}
		
		#Mazdans
		## Zoroastrians
		### Khurmazta
		every_county = { #Large Concentrations
			limit = { this.duchy = title:d_balkh }
			add_large_faith_to_county_effect = { FAITH = faith:khurmazta }
		}
		every_county = { #Small Concentrations
			limit = {
				OR = {
					this.duchy = title:d_osrushana
					this.duchy = title:d_ferghana
					this.duchy = title:d_chah
				}
				NOT = { this = title:c_otrar }
			}
			add_small_faith_to_county_effect = { FAITH = faith:khurmazta }
		}
		### Mazdyasna
		every_county = { #Large Concentrations
			limit = { this.faith = faith:zurvanism }
			add_large_faith_to_county_effect = { FAITH = faith:mazdayasna }
		}
		## Dualists
		###Manicheans
		every_county = { #Large Concentrations
			limit = { this.duchy = title:d_soghd }
			add_large_faith_to_county_effect = { FAITH = faith:manichean }
		}
		every_county = { #Small Concentrations
			limit = {
				OR = {
					this.duchy = title:d_osrushana
					this.duchy = title:d_ferghana
					this.duchy = title:d_chah
					this = title:c_baghdad
				}
				NOT = { this = title:c_otrar }
			}
			add_small_faith_to_county_effect = { FAITH = faith:manichean }
		}
		###Mandeans
		every_county = {
			limit = {
				OR = {
					this = title:c_rusafa
					this = title:c_ubulla
					this = title:c_abbadan
					this = title:c_ahvaz
					this = title:c_wasit
					this = title:c_badaraya
					this = title:c_batiha
					this = title:c_akhadid
					this = title:c_basra
					this = title:c_baghdad
				}
			}
			add_small_faith_to_county_effect = { FAITH = faith:mandeaism }
		}
		# Dharmics
		## Buddhists
		### Dharmagutakans
		every_county = { #Large Concentrations
			limit = { this = title:c_merv } #Major Buddhist center Pre-Islam
			add_large_faith_to_county_effect = { FAITH = faith:dharmaguptaka }
		}
		every_county = { #Small Concentrations
			limit = {
				OR = {
					this.duchy = title:d_soghd
					this.duchy = title:d_osrushana
					this.duchy = title:d_ferghana
					this.duchy = title:d_chah
					this.duchy = title:d_balkh
					this.duchy = title:d_khuttal
					this = title:c_zamm
					this = title:c_amol
				}
			}
			add_small_faith_to_county_effect = { FAITH = faith:dharmaguptaka }
		}
		## Other Special Regions
		#========================
		### Hebrew territories are an admixture of many different groups
		every_county = {
			limit = { culture = culture:hebrew }
			#Faiths
			add_large_faith_to_county_effect = { FAITH = faith:rabbinism }
			add_large_faith_to_county_effect = { FAITH = faith:samaritan }
			add_small_faith_to_county_effect = { FAITH = faith:nicene }
			#Cultures
			if = {
				limit = {
					OR = {
						this = title:c_jerusalem
						is_coastal_county = yes
					}
				}
				add_small_culture_to_county_effect = { CULTURE = culture:greek }
			}
			add_small_culture_to_county_effect = { CULTURE = culture:aramean }
		}
		#North African religious admixture of Donatists/Nicenes in Carthage/Numidia/Sitifensis
		every_county = {
			limit = {
				OR = {
					this.duchy = title:d_carthago
					this.duchy = title:d_numidia
					this.duchy = title:d_sitifensis
					this = title:c_gabes
					this = title:c_souf
				}
			}
			add_small_faith_to_county_effect = { FAITH = faith:african_church }
			add_small_faith_to_county_effect = { FAITH = faith:donatism }
		}
		# Other Specific Counties
		#========================
		title:c_jerusalem = { add_small_faith_to_county_effect = { FAITH = faith:miaphysitism } }
		title:c_harran = {
			#Faiths
			add_small_faith_to_county_effect = { FAITH = faith:platonism }
			add_small_faith_to_county_effect = { FAITH = faith:hellenic_pagan }
			add_small_faith_to_county_effect = { FAITH = faith:assyrian_pagan }
			#Cultures
			add_small_culture_to_county_effect = { CULTURE = culture:greek }
			add_small_culture_to_county_effect = { CULTURE = culture:aramean }
		}
		title:c_alexandria = {
			add_large_culture_and_faith_to_county_effect = {
				FAITH = faith:miaphysitism
				CULTURE = culture:coptic
			}
			add_small_culture_to_county_effect = { CULTURE = culture:greek }
			add_small_faith_to_county_effect = { FAITH = faith:karaism }
		}
		title:c_baghdad = {
			add_large_culture_and_faith_to_county_effect = {
				FAITH = faith:mazdayasna
				CULTURE = culture:persian
			}
			#Faiths
			add_small_faith_to_county_effect = { FAITH = faith:nicene }
			#Cultures
			add_small_culture_to_county_effect = { CULTURE = culture:assyrian }
			add_small_culture_to_county_effect = { CULTURE = culture:greek }
		}
		#Long Attested Non-Berber language presence by al-Bakri
		title:c_syrte = { add_small_culture_to_county_effect = { CULTURE = culture:punic } }
		## India and it's religious diversity
		#========================
		add_dharmic_faith_minorities = yes
	}
}

BP_set_minorities_by_date = {
	effect = {
		if = {
			limit = { current_date <= 500.1.1 }
			# Religions
			#========================
			# Abrahamics
			## Christians
			### Georgian Orthodox
			title:c_abkhazia = { #Abkhaz Christians
				add_large_faith_to_county_effect = { FAITH = faith:georgian_orthodox }
			}
			### Maronites
			every_county = {
				limit = {
					OR = {
						this.duchy = title:d_phoenice
						this = title:c_baalbek
						this = title:c_homs
						#In the North Mountains
						this = title:c_aintab
						this = title:c_antiocheia
						this = title:c_alexandretta
						this = title:c_tall_hamid
					}
					NOT = { this = title:c_acre }
				}
				add_large_faith_to_county_effect = { FAITH = faith:maronite_church }
			}
			every_county = {
				limit = {
					OR = {
						this = title:c_marash
						this = title:c_samosata
					}
				}
				add_small_faith_to_county_effect = { FAITH = faith:maronite_church }
			}
			###Apollinarism
			every_county = {
				limit = {
					OR = {
						this = title:c_beirut
						this = title:c_tripoli
						this = title:c_antiocheia
					}
				}
				add_small_faith_to_county_effect = { FAITH = faith:apollinarism }
			}
			###Syrian Orthodox
			every_county = {
				limit = {
					OR = {
						this.duchy = title:d_syria
						this.duchy = title:d_syria_salutaris
						this = title:c_marash
						this = title:c_aintab
						this = title:c_palmyra
						this = title:c_qaryatan
						this = title:c_homs
						this = title:c_tripoli
						this = title:c_alexandretta
						this = title:c_tall_hamid
					}
				}
				add_large_faith_to_county_effect = { FAITH = faith:syrian_orthodox }
			}
			every_county = {
				limit = {
					OR = {
						this = title:c_marash
						this = title:c_samosata
					}
				}
				add_small_faith_to_county_effect = { FAITH = faith:syrian_orthodox }
			}
			###Ebionites
			every_county = {
				limit = { this.culture = culture:hebrew }
				add_small_faith_to_county_effect = { FAITH = faith:ebionite }
			}
			###Nestorians
			every_county = {
				limit = {
					this.culture = culture:assyrian
					NOT = { this = title:c_harran }
				}
				add_large_faith_to_county_effect = { FAITH = faith:nestorian }
			}
			every_county = { #Small Concentrations
				limit = { this.duchy = title:d_tabaristan }
				add_small_faith_to_county_effect = { FAITH = faith:nestorian }
			}
			every_county = {
				limit = {
					OR = {
						this.duchy = title:d_leptis_magna
						this = title:c_tripolitana
					}
				}
				add_small_faith_to_county_effect = { FAITH = faith:gurzil }
			}
			#Hypsisterians
			##Hypsisterians
			###Hypsisterians
			#see [1]
			every_county = {
				#I select the locations Mueller notes as at least tangentially connected to the
				#cult of Oenoanda, with a few other places that he's more ambivalent
				limit = {
					OR = {
						#The southern references
						this = title:c_lycia
						this = title:c_caria
						this = title:c_pisidia
						#Phrygia & Lycia & Lydia
						this = title:c_phrygia
						this = title:c_prusa
						this = title:c_hadrianeia
						this = title:c_lydia
						this = title:c_chonae
						this = title:c_pacatiana
						#Surrounding Paphlagonia
						this = title:c_honorias
						this = title:c_pompeiopolis
						this = title:c_sinope
						#Bosporan Kingdom
						this = title:c_khumar
						this = title:c_azov
						this = title:c_tana #Was a major center, even if it had been reduced by Bolghars
					}
				}
				add_small_faith_to_county_effect = { FAITH = faith:bosporan_faith }
			}
			every_county = {
				#I select the locations Mueller notes as at least tangentially connected to the
				#cult of Oenoanda, with a few other places that he's more ambivalent
				limit = {
					OR = {
						this = title:c_kerch
						this = title:c_kalos_limen
					}
				}
				add_large_faith_to_county_effect = { FAITH = faith:bosporan_faith }
			}
			#Pagans
			##Hellenics
			###Cybellians
			every_county = {
				limit = { #Cybellian holy sites; still about 100 years since 
					OR = {
						this = title:c_phrygia
						this = title:c_satif
					}
				}
				add_small_faith_to_county_effect = { FAITH = faith:cybelian }
			}
			
			# Cultures
			#========================
			###Remnant Medians
			title:c_hamadan = { add_large_culture_to_county_effect = { CULTURE = culture:median } }
			every_county = {
				limit = {
					OR = {
						this = title:c_nihawand
						this = title:c_kermanshah
						this = title:c_masabadhan
						this = title:c_saimara
					}
				}
				add_small_culture_to_county_effect = { CULTURE = culture:median }
			}
			### Taifal settlement in Gaul
			 #Touffailles and Touffaillou
			title:c_quercy = { add_large_culture_to_county_effect = { CULTURE = culture:taifal } }
			every_county = {
				limit = {
					OR = {
						this = title:c_limousin
						this = title:c_lyon
					}
				}
				add_small_culture_to_county_effect = { CULTURE = culture:taifal }
			}
			#Romano-Arameans
			every_county = {
				limit = {
					OR = {
						this = title:c_beirut
						this = title:c_acre
					}
				}
				add_small_culture_to_county_effect = { CULTURE = culture:romano_aramean }
			}
			#Greeks
			every_county = {
				limit = {
					OR = {
						this = title:c_antiocheia
						this = title:c_acre
					}
				}
				add_small_culture_to_county_effect = { CULTURE = culture:greek }
			}
			#Libyans
			every_county = {
				limit = {
					OR = {
						this.duchy = title:d_leptis_magna
						this = title:c_tripolitana
					}
				}
				add_small_culture_to_county_effect = { CULTURE = culture:libyan }
			}
			#Bosporans
			every_county = {
				limit = {
					OR = {
						this = title:c_tana
						this = title:c_azov
						this = title:c_khumar
					}
				}
				add_small_culture_to_county_effect = { CULTURE = culture:bosporan }
			}
			
			## Other Special Regions
			#========================
			### North Africa
			#Western North Africa should have populations of Romano-African African Rite Nicenes
			every_county = {
				limit = {
					this.duchy = title:d_caesariensis
					is_coastal_county = yes
				}
				add_large_culture_and_faith_to_county_effect = {
					FAITH = faith:african_church
					CULTURE = culture:romano_african
				}
			}
			every_county = {
				limit = {
					OR = {
						this = title:c_melilla
						this = title:c_gharb
					}
				}
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:african_church
					CULTURE = culture:romano_african
				}
			}
			### Vandal Settlement in North Africa & Hispaniae
			every_county = {
				limit = {
					OR = {
						this.duchy = title:d_carthago
						this.duchy = title:d_tripolitania
						#Remnant Vandals in Hispaniae (see CK2)
						this = title:c_algeciras
						this = title:c_cadiz
					}
					NOT = { this = title:c_tripolitana }
					is_coastal_county = yes
				}
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:arian
					CULTURE = culture:vandalic
				}
			}
			### Persian-Aramean border
			every_county = {
				limit = {
					this = title:c_abbadan
					this = title:c_ahvaz
					this = title:c_behabad
				}
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:mazdayasna
					CULTURE = culture:persian
				}
			}
			### Alan settlement
			every_county = {
				limit = {
					OR = {
						this.duchy = title:d_carthago_inferior
						this.duchy = title:d_carthago_superior
						this = title:c_alcacer_do_sal
						this = title:c_elvas
						this = title:c_beja
						this = title:c_moura
						this = title:c_badajoz
						this = title:c_lisboa
						#North Africa
						this = title:c_bejaia
						this = title:c_algier
					}
				}
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:arian
					CULTURE = culture:alan
				}
			}
			### Visigothic Settlement
			#The Iberian conquests are _very_ recent, so there really shouldn't be much Gothic
			#settlement in Iberia at this time. Some of the various nucleus of later settlement should
			#exist, but not actual majorities
			every_county = {
				limit = {
					OR = {
						#Major urban nucleus under Visigoths directly in 476
						this = title:c_barcelona
						this = title:c_toledo
						#Campi Gothorum
						this = title:c_burgos
						this = title:c_valladolid
					}
				}
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:gothic_church
					CULTURE = culture:visigothic
				}
			}
			### Nicene Christians amongst the Priscillianists & Hellenics in Hispania
			every_county = { #Large populations
				limit = {
					OR = {
						this.faith = faith:priscillianism
						this.faith = faith:hellenic_pagan
					}
					this.culture = culture:romano_hispanic
					any_neighboring_county = { this.faith = faith:mozarabic_church }
				}
				add_large_faith_to_county_effect = { FAITH = faith:mozarabic_church }
			}
			every_county = { #Small populations
				limit = {
					OR = {
						this.faith = faith:priscillianism
						this.faith = faith:hellenic_pagan
					}
					this.culture = culture:romano_hispanic
					NOT = { any_neighboring_county = { this.faith = faith:mozarabic_church } }
				}
				add_small_faith_to_county_effect = { FAITH = faith:mozarabic_church }
			}
			
			# Other Specific Counties
			#========================
			### Byzantium
			title:c_byzantion = {
				add_large_culture_to_county_effect = { CULTURE = culture:roman }
				add_small_faith_to_county_effect = { FAITH = faith:miaphysitism }
			}
			### Thrace
			title:c_nikopolis = {
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:gothic_church
					CULTURE = culture:thracian_gothic
				}
			}
			### Pontus
			title:c_trebizond = {
				add_large_culture_and_faith_to_county_effect = {
					FAITH = faith:georgian_pagan
					CULTURE = culture:macronian
				}
			}
			### Hellas
			title:c_attica = {
				add_small_faith_to_county_effect = { FAITH = faith:platonism }
				add_small_faith_to_county_effect = { FAITH = faith:hellenic_pagan }
			}
			### Asia
			#Remnant Phrygians
			title:c_phrygia = { add_large_culture_to_county_effect = { CULTURE = culture:phrygian } }
			title:c_pacatiana = { #Remnant Phrygian Ostrogoths/early Gothograecia (cf. Claudian, Zosimus)
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:gothic_church
					CULTURE = culture:gothic
				}
			}
			### Israel & Oriens
			title:c_ghazza = {
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:mazdayasna
					CULTURE = culture:persian
				}
			}
			title:c_jerusalem = {
				add_small_culture_to_county_effect = { CULTURE = culture:roman }
				add_small_faith_to_county_effect = { FAITH = faith:monophysitism }
			}
			title:c_marash = { add_large_culture_to_county_effect = { CULTURE = culture:aramean } }
			title:c_samosata = { add_small_culture_to_county_effect = { CULTURE = culture:aramean } }
			title:c_antiocheia = { add_small_culture_to_county_effect = { CULTURE = culture:aramean } }
			### Egypt
			title:c_alexandria = {
				add_small_faith_to_county_effect = { FAITH = faith:egyptian_pagan } #Horapollo in the late 5th century was buried by Egyptian Rites
				add_small_culture_to_county_effect = { CULTURE = culture:roman }
			}
			### Gaul
			title:c_provence = {
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:nicene
					CULTURE = culture:massalian
				}
			}
			### North Africa
			title:c_tunis = { add_small_culture_to_county_effect = { CULTURE = culture:punic } }
			### Asoristan
			title:c_rusafa = { add_small_culture_to_county_effect = { CULTURE = culture:aramean } }
			title:c_tustar = { #Gondishapur, Susa, &c. a Cosmopolitan region
				#Faith
				add_large_faith_to_county_effect = { FAITH = faith:nestorian }
				add_small_faith_to_county_effect = { FAITH = faith:nicene } #Roman captives after Shapur II rebuilt the city
				add_small_faith_to_county_effect = { FAITH = faith:hellenic_pagan } #Roman captives after Shapur II rebuilt the city
				#Culture
				add_large_culture_to_county_effect = { CULTURE = culture:aramean }
				add_small_culture_to_county_effect = { CULTURE = culture:roman } #Roman captives after Shapur II rebuilt the city
				add_small_culture_to_county_effect = { CULTURE = culture:greek } #Ancient Greek settlement in Susa
			}
			### Daylam
			title:c_urmiya = {
				add_large_culture_and_faith_to_county_effect = {
					FAITH = faith:armenian_apostolic
					CULTURE = culture:armenian
				}
				add_small_faith_to_county_effect = { FAITH = faith:nestorian }
				add_small_faith_to_county_effect = { FAITH = faith:manichean }
			}
			title:c_talish = { add_large_faith_to_county_effect = { FAITH = faith:manichean } }
			### Arabia
			title:c_samman = { add_large_culture_to_county_effect = { CULTURE = culture:aramean } }
			### Spain
			title:c_porto = {
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:arian
					CULTURE = culture:buri
				}
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:mozarabic_church
					CULTURE = culture:romano_hispanic
				}
			}
			title:c_santiago = {
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:arian
					CULTURE = culture:macromanni
				}
			}
			title:c_viseu = {
				add_small_culture_and_faith_to_county_effect = {
					FAITH = faith:mozarabic_church
					CULTURE = culture:romano_hispanic
				}
			}
			title:c_monterrei = {
				add_large_culture_and_faith_to_county_effect = {
					FAITH = faith:priscillianism
					CULTURE = culture:romano_hispanic
				}
				add_small_faith_to_county_effect = { FAITH = faith:mozarabic_church }
			}
		}
	}
}

initial_spawn_minority_courtiers = {
	effect = { every_ruler = { trigger_event = { on_action = spawn_minority_characters } } }
}
