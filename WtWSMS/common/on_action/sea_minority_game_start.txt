on_game_start = {
	on_actions = {
		set_minorities_game_start
		BP_set_minorities_by_date
	}
}

on_game_start_after_lobby = {
	on_actions = {
		initial_spawn_minority_courtiers
	}
}

##### Changed from Vanilla: Removed various religions based on WtWSMS status, added WtWSMS cases

# culture_minorities_large
# culture_minorities_small
# faith_minorities_large
# faith_minorities_small

set_minorities_game_start = {
	effect = {
		title:c_kerala = {
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:kochinim
			}
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:malabarism
			}
		}
		title:c_eranad = {
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:kochinim
			}
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:malabarism
			}
		}
		title:c_alupa = {
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:kochinim
			}
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:malabarism
			}
		}

		title:c_kanara = {
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:nestorian
			}
		}
		title:c_panaji = {
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:nestorian
			}
		}

		title:c_marsabit = {
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:urartuism
			}
		}
		title:c_fudalhi = {
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:urartuism
			}
		}

		##### Changed from Vanilla: Removed Yazidis

		# Manichean

		title:c_shazhou = {
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:manichean
			}
		}
		title:c_liangzhou = {
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:manichean
			}
		}

		##### Changed from Vanilla: Removed Ash'ari

		# Jewish

		title:c_shazhou = {
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:rabbinism
			}
		}
		title:c_liangzhou = {
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:rabbinism
			}
		}

		# Parsees

		title:c_daman = {
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:mazdayasna
			}
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:persian
			}
		}
		##### Changed from Vanilla vvvvv
		
		#e_armenia
		title:c_derbent = { #Mountain Jews
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:tzadikite
			}
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:juhuro
			}
		}
		
		#e_byzantium
		##k_byzantium
		title:c_byzantion = {
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:rabbinism
			}
		}
		##k_oriens
		###Israel
		every_county = {
			limit = {
				OR = {
					this.duchy = title:d_iudea
					this.culture = culture:hebrew
				}
			}
			this = {
				#Faiths
				if = {
					limit = { NOT = { this.faith = faith:rabbinism } }
					add_to_variable_list = {
						name = faith_minorities_large
						target = faith:rabbinism
					}
				}
				if = {
					limit = { NOT = { this.faith = faith:samaritan } }
					add_to_variable_list = {
						name = faith_minorities_small
						target = faith:samaritan
					}
				}
			}
		}
		title:c_jerusalem = {
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:aramean
			}
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:greek
			}
		}
		###Others
		title:c_harran = {
			#Faiths
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:platonism
			}
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:hellenic_pagan
			}
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:assyrian_pagan
			}
			#Cultures
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:greek
			}
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:aramean
			}
		}
		##k_egypt
		title:c_alexandria = {
			if = {
				limit = { NOT = { this.faith = faith:miaphysitism } }
				add_to_variable_list = {
					name = faith_minorities_large
					target = faith:miaphysitism
				}
			}
		}
		#e_persia
		##k_asoristan
		title:c_baghdad = {
			#Faiths
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:mazdayasna
			}
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:manichean
			}
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:rabbinism
			}
			add_to_variable_list = {
				name = faith_minorities_small
				target = faith:nicene
			}
			#Cultures
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:persian
			}
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:hebrew
			}
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:assyrian
			}
			add_to_variable_list = {
				name = culture_minorities_small
				target = culture:greek
			}
		}
		##### Changed from Vanilla ^^^^^
	}
}

BP_set_minorities_by_date = {
	effect = {
		if = {
			limit = { current_date <= 500.1.1 }
			
			#e_armenia
			title:c_abkhazia = {
				add_to_variable_list = {
					name = faith_minorities_large
					target = faith:georgian_pagan
				}
			}
			
			#e_byzantium
			##k_byzantium
			title:c_byzantion = {
				add_to_variable_list = {
					name = faith_minorities_small
					target = faith:miaphysitism
				}
				add_to_variable_list = {
					name = faith_minorities_small
					target = faith:rabbinism
				}
				add_to_variable_list = {
					name = culture_minorities_large
					target = culture:roman
				}
			}
			##k_pontus
			title:c_trebizond = {
				add_to_variable_list = {
					name = faith_minorities_small
					target = faith:georgian_pagan
				}
				add_to_variable_list = {
					name = culture_minorities_large
					target = culture:macronian
				}
			}
			##k_hellas
			title:c_attica = {
				add_to_variable_list = {
					name = faith_minorities_small
					target = faith:platonism
				}
				add_to_variable_list = {
					name = faith_minorities_small
					target = faith:hellenic_pagan
				}
			}
			##k_asia
			title:c_phrygia = {
				add_to_variable_list = {
					name = culture_minorities_large
					target = culture:phrygian
				}
			}
			##k_thrace
			title:c_nikopolis = {
				add_to_variable_list = {
					name = faith_minorities_large
					target = faith:gothic_church
				}
				add_to_variable_list = {
					name = culture_minorities_large
					target = culture:thracian_gothic
				}
			}
			##k_oriens
			title:c_baalbek = {
				#Faiths
				add_to_variable_list = {
					name = faith_minorities_large
					target = faith:hellenic_pagan
				}
			}
			###Israel
			every_county = {
				limit = { this.duchy = title:d_iudea }
				this = {
					#Faiths
					if = {
						limit = { NOT = { this.faith = faith:nicene } }
						add_to_variable_list = {
							name = faith_minorities_small
							target = faith:nicene
						}
					}
					if = {
						limit = { NOT = { this.faith = faith:ebionite } }
						add_to_variable_list = {
							name = faith_minorities_small
							target = faith:ebionite
						}
					}
				}
			}
			title:c_ghazza = {
				add_to_variable_list = {
					name = culture_minorities_large
					target = culture:hebrew
				}
			}
			
			#e_north_africa
			##k_africa
			title:c_tunis = {
				add_to_variable_list = {
					name = faith_minorities_small
					target = faith:arian
				}
				add_to_variable_list = {
					name = culture_minorities_small
					target = culture:vandalic
				}
			}
			
			#e_spain
			#Alans in Alentejo, Cartaginense, Alenquer
			#Buri in Terras de Boro
			#Marcomanni (sp) in Galecia
		}
	}
}

initial_spawn_minority_courtiers = {
	effect = {
		every_ruler = { trigger_event = { on_action = spawn_minority_characters } }
	}
}
