#TODO: Add net size variable to faiths/cultures as well

open_minority_tooltip = {
	scope = county
	
	effect = {
		root = {
			save_temporary_scope_as = the_county_temp
			set_variable = {
				name = the_county_temp
				value = root
			}
			
			if = {
				limit = { scope:the_county_temp.number_of_culture_minorities_in_county_weighted > scope:the_county_temp.minority_capacity_of_county_culture }
				set_variable = over_culture_capacity
			}
			if = {
				limit = { scope:the_county_temp.number_of_faith_minorities_in_county_weighted > scope:the_county_temp.minority_capacity_of_county_culture }
				set_variable = over_faith_capacity
			}
			
			##### CULTURE CASES #####
			if = {
				limit = { culture = { has_a_culture_blending_tradition_trigger = yes } }
				set_variable = the_county_has_a_culture_blending_tradition
			}
			if = {
				limit = { has_a_rough_terrain_province_trigger = yes }
				set_variable = the_county_has_a_rough_terrain_province
			}
			if = {
				limit = { has_a_wooded_terrain_province_trigger = yes }
				set_variable = the_county_has_a_wooded_terrain_province
			}
			if = {
				limit = { has_a_jungle_terrain_province_trigger = yes }
				set_variable = the_county_has_a_jungle_terrain_province
			}
			if = {
				limit = { has_a_desert_terrain_province_trigger = yes }
				set_variable = the_county_has_a_desert_terrain_province
			}
			
			if = {
				limit = { has_variable_list = culture_minorities_small }
				every_in_list = {
					variable = culture_minorities_small
					this = {
						set_variable = the_culture_is_small
						if = {
							limit = { has_reduced_weight_in_rough_terrain_trigger = { CULTURE = this } }
							set_variable = the_culture_has_reduced_weight_in_rough_terrain
						}
						if = {
							limit = { has_reduced_weight_in_wooded_terrain_trigger = { CULTURE = this } }
							set_variable = the_culture_has_reduced_weight_in_wooded_terrain
						}
						if = {
							limit = { has_reduced_weight_in_jungle_terrain_trigger = { CULTURE = this } }
							set_variable = the_culture_has_reduced_weight_in_jungle_terrain
						}
						if = {
							limit = { has_reduced_weight_in_desert_terrain_trigger = { CULTURE = this } }
							set_variable = the_culture_has_reduced_weight_in_desert_terrain
						}
						root = { save_temporary_scope_as = the_county }
						this = { save_temporary_scope_as = the_culture }
						set_variable = {
							name = support
							value = support_of_a_culture_minority_in_county
						}
						set_variable = {
							name = feeding
							value = feeding_of_a_culture_minority_in_county
						}
						set_variable = {
							name = net_size
							value = culture_small_minority_weight_value
						}
					}
				}
			}
			if = {
				limit = { has_variable_list = culture_minorities_large }
				every_in_list = {
					variable = culture_minorities_large
					this = {
						if = {
							limit = { has_reduced_weight_in_rough_terrain_trigger = { CULTURE = this } }
							set_variable = the_culture_has_reduced_weight_in_rough_terrain
						}
						if = {
							limit = { has_reduced_weight_in_wooded_terrain_trigger = { CULTURE = this } }
							set_variable = the_culture_has_reduced_weight_in_wooded_terrain
						}
						if = {
							limit = { has_reduced_weight_in_jungle_terrain_trigger = { CULTURE = this } }
							set_variable = the_culture_has_reduced_weight_in_jungle_terrain
						}
						if = {
							limit = { has_reduced_weight_in_desert_terrain_trigger = { CULTURE = this } }
							set_variable = the_culture_has_reduced_weight_in_desert_terrain
						}
						root = { save_temporary_scope_as = the_county }
						this = { save_temporary_scope_as = the_culture }
						set_variable = {
							name = support
							value = support_of_a_culture_minority_in_county
						}
						set_variable = {
							name = feeding
							value = feeding_of_a_culture_minority_in_county
						}
						set_variable = {
							name = net_size
							value = culture_large_minority_weight_value
						}
					}
				}
			}
			
			##### FAITH CASES #####
			if = {
				limit = { faith = { is_dharmic_faith_trigger = yes } }
				set_variable = the_county_has_dharmic_faith
			}
			if = {
				limit = { culture = { has_a_religion_blending_tradition_trigger = yes } }
				set_variable = the_county_has_a_religion_blending_tradition
			}
			if = {
				limit = { has_variable_list = faith_minorities_small }
				every_in_list = {
					variable = faith_minorities_small
					this = {
						set_variable = the_faith_is_small
						if = {
							limit = { has_reduced_weight_in_dharmic_counties_trigger = yes }
							set_variable = the_faith_has_reduced_weight_in_dharmic_counties
						}
						if = {
							limit = { has_adaptive_type_tenet_trigger = yes }
							set_variable = the_faith_is_adaptive
						}
						root = { save_temporary_scope_as = the_county }
						this = { save_temporary_scope_as = the_faith }
						set_variable = {
							name = support
							value = support_of_a_faith_minority_in_county
						}
						set_variable = {
							name = feeding
							value = feeding_of_a_faith_minority_in_county
						}
						set_variable = {
							name = net_size
							value = faith_small_minority_weight_value
						}
					}
				}
			}
			if = {
				limit = { has_variable_list = faith_minorities_large }
				every_in_list = {
					variable = faith_minorities_large
					this = {
						if = {
							limit = { has_reduced_weight_in_dharmic_counties_trigger = yes }
							set_variable = the_faith_has_reduced_weight_in_dharmic_counties
						}
						if = {
							limit = { has_adaptive_type_tenet_trigger = yes }
							set_variable = the_faith_is_adaptive
						}
						root = { save_temporary_scope_as = the_county }
						this = { save_temporary_scope_as = the_faith }
						set_variable = {
							name = support
							value = support_of_a_faith_minority_in_county
						}
						set_variable = {
							name = feeding
							value = feeding_of_a_faith_minority_in_county
						}
						set_variable = {
							name = net_size
							value = faith_large_minority_weight_value
						}
					}
				}
			}
		}
	}
}
close_minority_tooltip = {
	scope = county
	
	effect = {
		root = {
			if = {
				limit = { has_variable = the_county_temp }
				remove_variable = the_county_temp
			}
			if = {
				limit = { has_variable = over_culture_capacity }
				remove_variable = over_culture_capacity
			}
			if = {
				limit = { has_variable = over_faith_capacity }
				remove_variable = over_faith_capacity
			}
			
			##### CULTURE CASES #####
			if = {
				limit = { has_variable = has_a_culture_blending_tradition_trigger }
				remove_variable = the_county_has_a_culture_blending_tradition
			}
			if = {
				limit = { has_variable = has_a_rough_terrain_province_trigger }
				remove_variable = the_county_has_a_rough_terrain_province
			}
			if = {
				limit = { has_variable_list = culture_minorities_small }
				every_in_list = {
					variable = culture_minorities_small
					this = {
						remove_variable = the_culture_is_small
						if = {
							limit = { has_variable = has_reduced_weight_in_rough_terrain_trigger }
							remove_variable = the_culture_has_reduced_weight_in_rough_terrain
						}
						if = {
							limit = { has_variable = support }
							remove_variable = support
						}
						if = {
							limit = { has_variable = feeding }
							remove_variable = feeding
						}
						if = {
							limit = { has_variable = net_size }
							remove_variable = net_size
						}
					}
				}
			}
			if = {
				limit = { has_variable_list = culture_minorities_large }
				every_in_list = {
					variable = culture_minorities_small
					this = {
						if = {
							limit = { has_variable = has_reduced_weight_in_rough_terrain_trigger }
							remove_variable = the_culture_has_reduced_weight_in_rough_terrain
						}
						if = {
							limit = { has_variable = support }
							remove_variable = support
						}
						if = {
							limit = { has_variable = feeding }
							remove_variable = feeding
						}
						if = {
							limit = { has_variable = net_size }
							remove_variable = net_size
						}
					}
				}
			}
			
			##### FAITH CASES #####
			if = {
				limit = { has_variable = the_county_has_dharmic_faith }
				remove_variable = the_county_has_dharmic_faith
			}
			if = {
				limit = { has_variable_list = faith_minorities_small }
				every_in_list = {
					variable = faith_minorities_small
					this = {
						if = {
							limit = { has_variable = the_faith_has_reduced_weight_in_dharmic_counties }
							remove_variable = the_faith_has_reduced_weight_in_dharmic_counties
						}
						if = {
							limit = { has_variable = support }
							remove_variable = support
						}
						if = {
							limit = { has_variable = feeding }
							remove_variable = feeding
						}
						if = {
							limit = { has_variable = net_size }
							remove_variable = net_size
						}
					}
				}
			}
			if = {
				limit = { has_variable_list = faith_minorities_large }
				every_in_list = {
					variable = faith_minorities_large
					this = {
						remove_variable = the_faith_is_small
						if = {
							limit = { has_variable = the_faith_has_reduced_weight_in_dharmic_counties }
							remove_variable = the_faith_has_reduced_weight_in_dharmic_counties
						}
						if = {
							limit = { has_variable = support }
							remove_variable = support
						}
						if = {
							limit = { has_variable = feeding }
							remove_variable = feeding
						}
						if = {
							limit = { has_variable = net_size }
							remove_variable = net_size
						}
					}
				}
			}
		}
	}
}
