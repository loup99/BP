#The values in this file are "generic" in one of three senses:
# 1). They'd be templated if script values supported $SUBSTITUTION$ syntax and thus represent code duplication
# 2). They provide various common interfaces and values that shouldn't be modified by others
# 3). They are not meant for TCs (or other mods) to modify as they will touch some core mod mechanics
# Modify at your own risk.

#Generic values
minority_always_supported_value = 1000 #For things like Diasporic
majority_province_support_value = 10
large_minority_support_value = 2
large_minority_cost_value = 4
small_minority_support_value = 1
small_minority_cost_value = 2

#small minority, large minority, majority; script value in case we want to change this
number_of_minority_levels = 3

years_between_general_events = 10
years_between_over_capacity_reduction_events = 5

#Each level of development in pluralist/egalitarian counties increases faith/culture capacity
#by this much; an extra 2 capacity at full development level
pluralistic_capacity_from_development = 0.25
fundamentalist_capacity_from_development = 0.25
egalitarian_capacity_from_development = 0.25
communal_capacity_from_development = 0.25

#Just counts the number of different minorities in the county
number_of_culture_minorities_in_county = {
	value = 0
	if = {
		limit = { this = { has_variable_list = culture_minorities_small } }
		this = { every_in_list = { variable = culture_minorities_small add = 1 } }
	}
	if = {
		limit = { this = { has_variable_list = culture_minorities_large } }
		this = { every_in_list = { variable = culture_minorities_large add = 1 } }
	}
}
number_of_faith_minorities_in_county = {
	value = 0
	if = {
		limit = { this = { has_variable_list = faith_minorities_small } }
		this = { every_in_list = { variable = faith_minorities_small add = 1 } }
	}
	if = {
		limit = { this = { has_variable_list = faith_minorities_large } }
		this = { every_in_list = { variable = faith_minorities_large add = 1 } }
	}
}

#Generic Pseudo-Template code for minority support

#Culture Scope
#The general calculation for the "support" of a minority in a given the_county
#Modders shouldn't tweak this unless they really want to change core functionality; changing
# "support_of_a_culture_minority_in_county" in sea_minority_culture_values.txt is suggested instead.
support_of_a_minority_culture_generic = {
	value = 0
	#Determine how much is needed to feed this minority
	if = {
		limit = {
			scope:the_county = {
				county_has_a_minority_with_type_and_size_trigger = {
					CULTURE_OR_FAITH = culture
					SIZE = large
					TARGET = scope:the_culture
				}
			}
		}
		subtract = large_minority_cost_value
		#If there's no majority provinces on the map, it takes a bit more to keep large majorities going
		#this should encourage eventual disappearance of only thinly supported cultures;
		# or at least push them towards a minority status
		if = {
			limit = { NOT = { any_county = { this.culture = scope:the_culture } } }
			subtract = small_minority_cost_value
		}
	}
	if = {
		limit = {
			scope:the_county = {
				county_has_a_minority_with_type_and_size_trigger = {
					CULTURE_OR_FAITH = culture
					SIZE = small
					TARGET = scope:the_culture
				}
			}
		}
		subtract = small_minority_cost_value
		#If there's no large minorities on the map, it takes a bit more to keep small majorities going
		#this should encourage eventual disappearance of only thinly supported cultures;
		#or at least push them to be more concentrated
		if = {
			limit = {
				NOT = { any_county = { this.culture = scope:the_culture } }
				NOT = {
					any_county = {
						county_has_a_minority_with_type_and_size_trigger = {
							CULTURE_OR_FAITH = culture
							SIZE = large
							TARGET = scope:the_culture
						}
					}
				}
			}
			subtract = small_minority_cost_value
		}
	}
	#Determine how much is supporting this minority
	scope:the_county = {
		every_neighboring_county = {
			if = { #County with a majority population
				limit = { this.culture = scope:the_culture }
				add = majority_province_support_value
			}
			else_if = { #County with a large minority
				limit = {
					county_has_a_minority_with_type_and_size_trigger = {
						CULTURE_OR_FAITH = culture
						SIZE = large
						TARGET = scope:the_culture
					}
				}
				add = large_minority_support_value
			}
			else_if = { #County with a small minority
				limit = {
					county_has_a_minority_with_type_and_size_trigger = {
						CULTURE_OR_FAITH = culture
						SIZE = small
						TARGET = scope:the_culture
					}
				}
				add = small_minority_support_value
			}
		}
		holder = {
			if = { #If the minority matches the ruler, it should not fade
				limit = { this.culture = scope:the_culture }
				add = minority_always_supported_value
				add = minority_always_supported_value #Even more-so than the "Always Supported"
			}
		}
		#Specific factors about the county
		if = {
			limit = { county_specific_large_support_culture_trigger = yes }
			add = large_minority_support_value
		}
		if = {
			limit = { county_specific_small_support_culture_trigger = yes }
			add = small_minority_support_value
		}
	}
	#Generic Item Specific Effects
	scope:the_culture = {
		if = { limit = { large_minority_support_culture_aspect_trigger = yes } add = large_minority_support_value }
		if = { limit = { small_minority_support_culture_aspect_trigger = yes } add = small_minority_support_value }
		if = {
			limit = { minority_always_supported_culture_aspect_trigger = { THE_COUNTY = scope:the_county } }
			add = minority_always_supported_value
		}
	}
}
#Faith Scope
#The general calculation for the "support" of a minority in a given the_county
#Modders shouldn't tweak this unless they really want to change core functionality; changing
# "support_of_a_faith_minority_in_county" in sea_minority_culture_values.txt is suggested instead.
support_of_a_minority_faith_generic = {
	value = 0
	#Determine how much is needed to feed this minority
	if = {
		limit = {
			scope:the_county = {
				county_has_a_minority_with_type_and_size_trigger = {
					CULTURE_OR_FAITH = faith
					SIZE = large
					TARGET = scope:the_faith
				}
			}
		}
		subtract = large_minority_cost_value
		#If there's no majority provinces on the map, it takes a bit more to keep large majorities going
		#this should encourage eventual disappearance of only thinly supported faiths;
		# or at least push them towards a minority status
		if = {
			limit = { NOT = { any_county = { this.faith = scope:the_faith } } }
			subtract = small_minority_cost_value
		}
	}
	if = {
		limit = {
			scope:the_county = {
				county_has_a_minority_with_type_and_size_trigger = {
					CULTURE_OR_FAITH = faith
					SIZE = small
					TARGET = scope:the_faith
				}
			}
		}
		subtract = small_minority_cost_value
		#If there's no large minorities on the map, it takes a bit more to keep small majorities going
		#this should encourage eventual disappearance of only thinly supported faiths;
		#or at least push them to be more concentrated
		if = {
			limit = {
				NOT = { any_county = { this.faith = scope:the_faith } }
				NOT = {
					any_county = {
						county_has_a_minority_with_type_and_size_trigger = {
							CULTURE_OR_FAITH = faith
							SIZE = large
							TARGET = scope:the_faith
						}
					}
				}
			}
			subtract = small_minority_cost_value
		}
	}
	#Determine how much is supporting this minority
	scope:the_county = {
		every_neighboring_county = {
			if = { #County with a majority population
				limit = { this.faith = scope:the_faith }
				add = majority_province_support_value
			}
			else_if = { #County with a large minority
				limit = {
					county_has_a_minority_with_type_and_size_trigger = {
						CULTURE_OR_FAITH = faith
						SIZE = large
						TARGET = scope:the_faith
					}
				}
				add = large_minority_support_value
			}
			else_if = { #County with a small minority
				limit = {
					county_has_a_minority_with_type_and_size_trigger = {
						CULTURE_OR_FAITH = faith
						SIZE = small
						TARGET = scope:the_faith
					}
				}
				add = small_minority_support_value
			}
		}
		holder = {
			if = { #If the minority matches the ruler, it should not fade
				limit = { this.faith = scope:the_faith }
				add = minority_always_supported_value
				add = minority_always_supported_value #Even more-so than the "Always Supported"
			}
		}
		#Specific factors about the county
		if = {
			limit = { county_specific_large_support_faith_trigger = yes }
			add = large_minority_support_value
		}
		if = {
			limit = { county_specific_small_support_faith_trigger = yes }
			add = small_minority_support_value
		}
	}
	#Generic Item Specific Effects
	scope:the_faith = {
		if = { limit = { large_minority_support_faith_aspect_trigger = yes } add = large_minority_support_value }
		if = { limit = { small_minority_support_faith_aspect_trigger = yes } add = small_minority_support_value }
		if = {
			limit = { minority_always_supported_faith_aspect_trigger = { THE_COUNTY = scope:the_county } }
			add = minority_always_supported_value
		}
	}
}