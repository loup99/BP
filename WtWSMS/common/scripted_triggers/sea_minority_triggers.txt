
county_has_minority_faith_trigger = {
	OR = {
		AND = {
			has_variable_list = faith_minorities_small
			variable_list_size = {
				name = faith_minorities_small
				value > 0
			}
		}
		AND = {
			has_variable_list = faith_minorities_large
			variable_list_size = {
				name = faith_minorities_large
				value > 0
			}
		}
	}
}

county_has_minority_culture_trigger = {
	OR = {
		AND = {
			has_variable_list = culture_minorities_small
			variable_list_size = {
				name = culture_minorities_small
				value > 0
			}
		}
		AND = {
			has_variable_list = culture_minorities_large
			variable_list_size = {
				name = culture_minorities_large
				value > 0
			}
		}
	}
}

# $FAITH$
county_has_astray_or_worse_minority_faith_trigger = {
	county_has_minority_faith_trigger = yes
	OR = {
		any_in_list = {
			variable = faith_minorities_small
			$FAITH$ = {
				faith_hostility_level = {
					target = prev
					value >= faith_astray_level
				}
			}
		}
		any_in_list = {
			variable = faith_minorities_large
			$FAITH$ = {
				faith_hostility_level = {
					target = prev
					value >= faith_astray_level
				}
			}
		}
	}
}

# $CULTURE$
county_has_different_heritage_minority_culture_trigger = {
	county_has_minority_culture_trigger = yes
	OR = {
		any_in_list = {
			variable = culture_minorities_small
			$CULTURE$ = {
				NOT = { has_same_culture_heritage = prev }
			}
		}
		any_in_list = {
			variable = culture_minorities_large
			$CULTURE$ = {
				NOT = { has_same_culture_heritage = prev }
			}
		}
	}
}

# $FAITH$
county_has_specific_minority_faith_trigger = {
	OR = {
		AND = {
			has_variable_list = faith_minorities_small
			is_target_in_variable_list = {
				name = faith_minorities_small
				target = $FAITH$
			}
		}
		AND = {
			has_variable_list = faith_minorities_large
			is_target_in_variable_list = {
				name = faith_minorities_large
				target = $FAITH$
			}
		}
	}
}

# $CULTURE$
county_has_specific_minority_culture_trigger = {
	OR = {
		AND = {
			has_variable_list = culture_minorities_small
			is_target_in_variable_list = {
				name = culture_minorities_small
				target = $CULTURE$
			}
		}
		AND = {
			has_variable_list = culture_minorities_large
			is_target_in_variable_list = {
				name = culture_minorities_large
				target = $CULTURE$
			}
		}
	}
}

##### Changed from Vanilla vvvvv

### These are meant to overwritten liberally when integrated into other mods

### WtWSMS TODO: apply proper generalization here
county_is_religiously_protected_trigger = {
	exists = holder.liege
	holder = {
		OR = {
			AND = {
				liege = root
				is_ruler = yes
				is_independent_ruler = no
				vassal_contract_has_flag = religiously_protected
			}
			any_liege_or_above = {
				exists = liege
				liege = root
				is_ruler = yes
				is_independent_ruler = no
				vassal_contract_has_flag = religiously_protected
			}
		}
	}
}

### General triggers
is_valid_immigration_target_county_trigger = { #county scope
	culture = { NOT = { has_cultural_tradition = tradition_isolationist } }
	faith = { NOT = { has_doctrine = tenet_ethnic_religion } }
}
is_valid_evangelizing_source_faith_trigger = { #faith scope
	NOT = { has_doctrine_parameter = unreformed }
	NOT = { has_doctrine = tenet_ethnic_religion }
	OR = {
		this.religion = religion:christianity_religion
		this.religion = religion:islam_religion
		this.religion = religion:buddhism_religion
		this.religion = religion:dualism_religion
	}
}
never_evangelizes_trigger = { #faith scope
	NOR = {
		this.religion = religion:christianity_religion
		this.religion = religion:islam_religion
		this.religion = religion:buddhism_religion
		this.religion = religion:dualism_religion
	}
}
is_frequently_evangelizeing_faith_trigger = { #faith scope
	OR = {
		has_doctrine = tenet_mendicant_preachers
		has_doctrine = tenet_autocephaly
	}
}
is_valid_evangelizing_target_faith_trigger = { #faith scope
	has_doctrine_parameter = unreformed
}
infrequent_evangelization_trigger = { #faith scope
	has_doctrine = tenet_communal_identity
}
valid_neighbor_immigration_state_trigger = {
	NOT = { culture = { has_cultural_tradition = tradition_isolationist } }
	NOT = { faith = { has_doctrine = tenet_ethnic_religion } }
}
valid_immigration_source_trigger = {
	any_neighboring_county = {
		NAND = {
			this.culture = scope:source_county.culture
			this.faith = scope:source_county.faith
		}
	}
}
#### These determine the triggers for how much weight a minority uses

has_a_non_tribal_holding_trigger = {
	any_province = {
		NOT = { has_holding_type = tribal_holding }
		has_holding = yes
	}
}

has_a_culture_blending_tradition_trigger = {
	OR = {
		has_cultural_tradition = tradition_culture_blending
		has_cultural_tradition = tradition_malleable_invaders
	}
}
has_a_religion_blending_tradition_trigger = {
	OR = {
		has_cultural_tradition = tradition_religion_blending
		has_cultural_tradition = tradition_steppe_tolerance
	}
}
is_dharmic_faith_trigger = {
	OR = {
		religion = religion:buddhism_religion
		religion = religion:hinduism_religion
		religion = religion:jainism_religion
	}
}
has_reduced_weight_in_dharmic_counties_trigger = {
	OR = {
		is_dharmic_faith_trigger = yes
		religion = religion:bon_religion
		religion = religion:tani_religion
		religion = religion:mundhum_religion
		religion = religion:qiangic_religion
		religion = religion:zunism_religion
		religion = religion:munda_religion
	}
}
has_reduced_weight_in_rough_terrain_trigger = {
	has_cultural_parameter = encourages_diversity_in_rough_terrain
}

#### These determine the triggers for support in generic support calculations

#support_of_a_culture_minority_in_county triggers
county_specific_large_support_culture_trigger = { #target_county scope
	#Rough terrain diversity minorities are mostly self-supporting when established
	AND = {
		scope:the_culture = { has_cultural_parameter = encourages_diversity_in_rough_terrain }
		has_variable_list = culture_minorities_large
		is_target_in_variable_list = { name = culture_minorities_large target = scope:the_culture }
		has_a_rough_terrain_province_trigger = yes
	}
}
county_specific_small_support_culture_trigger = { #target_county scope
	OR = {
		#Rough terrain diversity minorities are mostly self-supporting when established
		AND = {
			scope:the_culture = { has_cultural_parameter = encourages_diversity_in_rough_terrain }
			has_variable_list = culture_minorities_small
			is_target_in_variable_list = { name = culture_minorities_small target = scope:the_culture }
			has_a_rough_terrain_province_trigger = yes
		}
		#So that penninsulae and islands don't have small minorities die out (see Cyprus, Socotra)
		is_coastal_county = yes
	}
}
large_minority_support_culture_aspect_trigger = { #culture scope
	#Colonizers/Hellenizers: Equivalent to having a large minority next to you
	OR = {
		has_cultural_tradition = tradition_colonizers
		has_cultural_tradition = tradition_colonizers_non_dlc
		has_cultural_tradition = tradition_hellenizers
		has_cultural_tradition = tradition_hellenizers_non_dlc
	}
}
small_minority_support_culture_aspect_trigger = { #culture scope
	#Romance/Hellenic/Levantine Culture: Equivalent to having a small minority next to you
	OR = {
		has_cultural_tradition = tradition_romance_culture
		has_cultural_tradition = tradition_romance_culture_non_dlc
		has_cultural_tradition = tradition_hellenic_culture
		has_cultural_tradition = tradition_hellenic_culture_non_dlc
		has_cultural_tradition = tradition_levantine_traditions
		has_cultural_tradition = tradition_levantine_traditions_non_dlc
	}
}
minority_always_supported_culture_aspect_trigger = { #culture scope
	minority_always_supported_culture_aspect_generic_trigger = { THE_COUNTY = $THE_COUNTY$ }
}
#support_of_a_faith_minority_in_county triggers
county_specific_large_support_faith_trigger = { #target_county scope
	any_barony = { is_holy_site_of = scope:the_faith }
}
county_specific_small_support_faith_trigger = { #target_county scope
	OR = {
		#A zealous people supports keeping small minorities around a bit longer
		culture = { has_cultural_tradition = tradition_zealous_people }
		#So that penninsulae and islands don't have small minorities die out (see Cyprus, Socotra)
		is_coastal_county = yes
	}
}
large_minority_support_faith_aspect_trigger = { #faith scope
	always = no
}
small_minority_support_faith_aspect_trigger = { #faith scope
	always = no
}
minority_always_supported_faith_aspect_trigger = { #faith scope
	minority_always_supported_faith_aspect_generic_trigger = { THE_COUNTY = $THE_COUNTY$ }
}
##### Changed from Vanilla ^^^^^