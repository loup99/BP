namespace = BP_maintenance_events

#0001-1000: Bookmark-Related Stuff
#1001-????: Other Stuff

#0001-1000: Bookmark-Related Stuff

#Informational event for players at start
BP_maintenance_events.0001 = {
	type = character_event
	theme = realm
	
	title = BP_maintenance_events.0001.t
	
	desc = {
		#Basic Mod information
		desc = BP_maintenance_events.0001.desc.opening
		desc = BP_maintenance_events.0001.desc.more_information
		desc = BP_maintenance_events.0001.desc.development_info
		#Tell Players about any special character they are playing
		desc = BP_maintenance_events.0001.section_spacer
		desc = BP_maintenance_events.0001.character_description_intro
		desc = BP_maintenance_events.0001.character_description
		#Tell players about rules
		desc = BP_maintenance_events.0001.section_spacer
		#Vanilla Overwrites
		desc = BP_maintenance_events.0001.desc.wtwsms_vanilla_change_info
		triggered_desc = {
			trigger = { has_game_rule = strict_regional_heresy }
			desc = BP_maintenance_events.0001.desc.changed_default_heresy_status
		}
		triggered_desc = {
			trigger = { has_game_rule = bp_default_culture_conversion_speed }
			desc = BP_maintenance_events.0001.desc.changed_default_faith_conversion_speed
		}
		triggered_desc = {
			trigger = { has_game_rule = bp_default_faith_conversion_speed }
			desc = BP_maintenance_events.0001.desc.changed_default_culture_conversion_speed
		}
		triggered_desc = {
			trigger = { has_game_rule = bp_default_hybrid_and_divergence_cooldowns }
			desc = BP_maintenance_events.0001.desc.changed_default_culture_hybrid_divergence_rate
		}
		desc = BP_maintenance_events.0001.sub_section_spacer
		#WtWSMS Special Rules
		desc = BP_maintenance_events.0001.desc.wtwsms_rule_intro
		triggered_desc = {
			trigger = { has_game_rule = tribal_shatter_mechanic_enabled }
			desc = BP_maintenance_events.0001.desc.tribal_shatter
		}
		triggered_desc = {
			trigger = { has_game_rule = bp_strong_believers_conversion_resistance }
			desc = BP_maintenance_events.0001.desc.strong_believers
		}
		triggered_desc = {
			trigger = { has_game_rule = custom_kingdom_creation_blocked_for_specific_cases_enabled }
			desc = BP_maintenance_events.0001.desc.custom_kingdoms_empires
		}
		triggered_desc = {
			trigger = { has_game_rule = can_not_freely_create_empires }
			desc = BP_maintenance_events.0001.desc.can_not_freely_create_empires
		}
		desc = BP_maintenance_events.0001.sub_section_spacer
		desc = BP_maintenance_events.0001.desc.rule_closing
	}
	right_portrait = { character = ROOT }
	
	option = { name = BP_maintenance_events.0001.a }
}


#Does things for 476.2.2 game start
BP_maintenance_events.0002 = {
	scope = none
	hidden = yes
	
	immediate = {
		#Make Romulus Augustulus' Diarchy entrenched and give him senatorial approval
		character:96055 = {
			update_diarchy_swing_with_perspective_effect = {
				SWING = 80
				LIEGE = character:96054
			}
		}
		character:96054 = { update_all_senate_opinion_about_character_effect = { ACTOR = character:96054 } }
		#Give Basilicos Senatorial approval
		character:145226 = { update_all_senate_opinion_about_character_effect = { ACTOR = character:145226 } }
	}
}

#1001-????: Other Stuff
scripted_trigger weak_empire = { #Cribbed from game_rule_events
	tier = tier_empire
	is_titular = yes
	is_landless_type_title = no
	is_head_of_faith = no
}

BP_maintenance_events.1001 = { # Empire Obscurity Game Rule variant; called on death for titular empires with non-primitive governments
	type = character_event
	title = BP_maintenance_events.1001.t
	desc = BP_maintenance_events.1001.desc
	theme = realm
	left_portrait = {
		character = root
		animation = grief
	}

	trigger = {
		is_landed = yes
		is_at_war = no
		has_a_primitive_type_of_government_trigger = no
		primary_title.tier >= tier_empire
		any_held_title = { weak_empire = yes }
	}

	immediate = {
		random_held_title = {
			limit = { weak_empire = yes }
			save_scope_as = falling_empire
		}
	}

	option = { # No! I just need time!
		name = BP_maintenance_events.1001.a
		
		add_prestige = -2000
		add_prestige_experience = -2000
		
		ai_chance = {
			base = 0
		}
	}

	option = { # Farewell, dear empire...
		name = BP_maintenance_events.1001.b
		
		destroy_title = scope:falling_empire
		add_pressed_claim = scope:falling_empire
		
		ai_chance = {
			base = 100
		}
	}
}
